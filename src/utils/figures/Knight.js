import { Figure } from "../FigureClass.js";
import { calculatePointMoves } from "./figureUtils.js";

/**
 * Класс, представляющий коня в шахматах
 * Наследуется от базового класса Figure
 * Конь ходит буквой "Г" - на 2 клетки в одном направлении и на 1 в перпендикулярном
 * Единственная фигура, которая может "перепрыгивать" через другие фигуры
 */
export class Knight extends Figure {
    fullName = "Knight";
    sym = "n";
    weight = 3;

    /**
     * Метод для расчета возможных ходов коня
     * @returns {Array} Массив из 64 элементов, где:
     *                  0 - ход невозможен
     *                  1 - можно ходить на пустую клетку
     *                  2 - можно бить вражескую фигуру
     */
    setWays() {
        const knightMoves = [
            {dx: 2, dy: 1},   // Два вправо, один вверх
            {dx: 2, dy: -1},  // Два вправо, один вниз
            {dx: -2, dy: 1},  // Два влево, один вверх
            {dx: -2, dy: -1}, // Два влево, один вниз
            {dx: 1, dy: 2},   // Один вправо, два вверх
            {dx: 1, dy: -2},  // Один вправо, два вниз
            {dx: -1, dy: 2},  // Один влево, два вверх
            {dx: -1, dy: -2}  // Один влево, два вниз
        ];

        // Используем общую функцию для расчета точечных ходов
        return calculatePointMoves(this, knightMoves);
    }
}