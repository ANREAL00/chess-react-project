import { Figure } from "../FigureClass.js";
import { calculateLinearMoves } from "./figureUtils.js";

/**
 * Класс, представляющий ферзя в шахматах
 * Наследуется от базового класса Figure
 * Ферзь сочетает возможности ладьи и слона - ходит по горизонтали,
 * вертикали и диагонали на любое количество клеток
 */
export class Queen extends Figure {
    fullName = "Queen";
    sym = "q";
    weight = 9;

    /**
     * Метод для расчета возможных ходов ферзя
     * @returns {Array} Массив из 64 элементов, где:
     *                  0 - ход невозможен
     *                  1 - можно ходить на пустую клетку
     *                  2 - можно бить вражескую фигуру
     */
    setWays() {
        const directions = [
            // Горизонтальные и вертикальные направления (как ладья)
            {dx: 1, dy: 0},    // Вправо
            {dx: -1, dy: 0},   // Влево
            {dx: 0, dy: 1},    // Вверх
            {dx: 0, dy: -1},   // Вниз

            // Диагональные направления (как слон)
            {dx: 1, dy: -1},   // Вправо-вниз
            {dx: -1, dy: -1},  // Влево-вниз
            {dx: 1, dy: 1},    // Вправо-вверх
            {dx: -1, dy: 1}    // Влево-вверх
        ];

        // Используем общую функцию для расчета линейных ходов
        return calculateLinearMoves(this, directions);
    }
}